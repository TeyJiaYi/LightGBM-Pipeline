schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py config/preprocess_config.yaml
    deps:
    - path: config/preprocess_config.yaml
      hash: md5
      md5: 1faee154dd7e4b547e08f3424f0ec7a9
      size: 586
    - path: data/processed/train_loan.csv
      hash: md5
      md5: a77dcbfde935aa38b4f2930c41529d67
      size: 1633771
    - path: data/raw/new/
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: src/preprocess.py
      hash: md5
      md5: f67c07eeab20fb0dffa132544f1d851f
      size: 9394
    outs:
    - path: data/processed/loan_clean_latest.csv
      hash: md5
      md5: ff474699610bf3414671fe3d8897a996
      size: 1598179
  train:
    cmd: python src/train_model.py config/train_config.yaml
    deps:
    - path: config/train_config.yaml
      hash: md5
      md5: 6bf345593cd5d2380da17aea693ffd5b
      size: 848
    - path: data/processed/loan_clean_latest.csv
      hash: md5
      md5: ff474699610bf3414671fe3d8897a996
      size: 1598179
    - path: src/train_model.py
      hash: md5
      md5: bb25929b960d71ee19253a830bf97e30
      size: 7992
    outs:
    - path: output/models/
      hash: md5
      md5: cfd1f8fe6d03aa33f0825a2b855bf94f.dir
      size: 6851963
      nfiles: 1
  split_test:
    cmd: python src/split_test.py config/split_test_config.yaml
    deps:
    - path: config/split_test_config.yaml
      hash: md5
      md5: bd55b4d94dadcbb9ddf2b8b9305531f1
      size: 756
    - path: data/raw/original/
      hash: md5
      md5: f9a74faa03ac9af15a5db650e1e4cf8e.dir
      size: 109756930
      nfiles: 1
    - path: src/split_test.py
      hash: md5
      md5: a94db3192cf07a08a9e9d39268e6e3f9
      size: 8852
    outs:
    - path: data/processed/train_loan.csv
      hash: md5
      md5: a77dcbfde935aa38b4f2930c41529d67
      size: 1633771
    - path: data/test/test_loan.csv
      hash: md5
      md5: 04b2b7e7c785b48f851fb25b0d42b5e7
      size: 311256
  evaluate:
    cmd: python src/evaluate.py config/eval_config.yaml
    deps:
    - path: config/eval_config.yaml
      hash: md5
      md5: db6ebaa5ff2f811982e2e9e03e01654b
      size: 558
    - path: data/test/test_loan.csv
      hash: md5
      md5: 04b2b7e7c785b48f851fb25b0d42b5e7
      size: 311256
    - path: output/models/
      hash: md5
      md5: cfd1f8fe6d03aa33f0825a2b855bf94f.dir
      size: 6851963
      nfiles: 1
    - path: src/evaluate.py
      hash: md5
      md5: 1645191b371b9f78bc086c8904e0857b
      size: 7719
    outs:
    - path: reports/
      hash: md5
      md5: d476e348d54cf2422a7c79f82d45bc5e.dir
      size: 733
      nfiles: 1
  bento_build:
    cmd: python src/bento_build.py
    deps:
    - path: bentofile.yaml
      hash: md5
      md5: 0a5a90d3b284e9624b360249a6089dae
      size: 256
    - path: loanriskservice.py
      hash: md5
      md5: 14d76a0f14bf827db7dfedc124e154a1
      size: 2682
    - path: src/bento_build.py
      hash: md5
      md5: cde7acf95fe702ac163ef6f5a6936663
      size: 2716
  k8s_deploy:
    cmd: python src/deploy.py
    deps:
    - path: k8s/bento_deployment.yaml
      hash: md5
      md5: 4263d7e316cee7502e7bdb8b317f1663
      size: 584
    - path: model_version.txt
      hash: md5
      md5: 8f14e45fceea167a5a36dedd4bea2543
      size: 1
    - path: src/deploy.py
      hash: md5
      md5: e8ebfa3b8bd457e86ca76f034b76e729
      size: 1218
  seldon_deploy:
    cmd: python src/deploy.py
    deps:
    - path: k8s/seldon_deployment.yaml
      hash: md5
      md5: 4a390221b218c6f6d54264f48028c323
      size: 612
    - path: model_version.txt
      hash: md5
      md5: eccbc87e4b5ce2fe28308fd9f2a7baf3
      size: 1
    - path: src/deploy.py
      hash: md5
      md5: 38c9138734c81b26f819cb13c6e0ecb8
      size: 1041
