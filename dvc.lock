schema: '2.0'
stages:
  preprocess:
    cmd: python src/preprocess.py config/preprocess_config.yaml
    deps:
    - path: config/preprocess_config.yaml
      hash: md5
      md5: d931ec43806201a91c91f189dbfed214
      size: 545
    - path: data/processed/train_loan.csv
      hash: md5
      md5: b114bff6f40d6938fcbf03fb89a1cffe
      size: 913195
    - path: data/raw/new/
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: src/preprocess.py
      hash: md5
      md5: e81e46eeccd00461e3f27196b05fe6f4
      size: 6432
    outs:
    - path: data/processed/loan_clean_latest.csv
      hash: md5
      md5: b114bff6f40d6938fcbf03fb89a1cffe
      size: 913195
  train:
    cmd: python src/train_model.py config/train_config.yaml
    deps:
    - path: config/train_config.yaml
      hash: md5
      md5: eb260086fa6e8192e18b16c5a81eecba
      size: 771
    - path: data/processed/loan_clean_latest.csv
      hash: md5
      md5: b114bff6f40d6938fcbf03fb89a1cffe
      size: 913195
    - path: src/train_model.py
      hash: md5
      md5: ab8b3f3377c41c02cbd687bf5bf70a05
      size: 7515
    outs:
    - path: output/models/
      hash: md5
      md5: 25f3cc1891e6ece93121b4077e44fd92.dir
      size: 1762566
      nfiles: 1
  split_test:
    cmd: python src/split_test.py config/split_test_config.yaml
    deps:
    - path: config/split_test_config.yaml
      hash: md5
      md5: 955077264f4ab5105dcd922fb0bd2f32
      size: 626
    - path: data/raw/original/
      hash: md5
      md5: f9a74faa03ac9af15a5db650e1e4cf8e.dir
      size: 109756930
      nfiles: 1
    - path: src/split_test.py
      hash: md5
      md5: e03455bea055646a436101c334575a4b
      size: 7404
    outs:
    - path: data/processed/train_loan.csv
      hash: md5
      md5: b114bff6f40d6938fcbf03fb89a1cffe
      size: 913195
    - path: data/test/test_loan.csv
      hash: md5
      md5: 088dc9c5c02b17a092027aedc4cde746
      size: 228443
  evaluate:
    cmd: python src/evaluate.py config/eval_config.yaml
    deps:
    - path: config/eval_config.yaml
      hash: md5
      md5: db6ebaa5ff2f811982e2e9e03e01654b
      size: 558
    - path: data/test/test_loan.csv
      hash: md5
      md5: 088dc9c5c02b17a092027aedc4cde746
      size: 228443
    - path: output/models/
      hash: md5
      md5: 25f3cc1891e6ece93121b4077e44fd92.dir
      size: 1762566
      nfiles: 1
    - path: src/evaluate.py
      hash: md5
      md5: 1645191b371b9f78bc086c8904e0857b
      size: 7719
    outs:
    - path: reports/
      hash: md5
      md5: 222542c3623e391567df1e34f62e7b4a.dir
      size: 734
      nfiles: 1
  bento_build:
    cmd: python src/bento_build.py
    deps:
    - path: bentofile.yaml
      hash: md5
      md5: 9442024cb4a4bdba82f2e430cb9ed250
      size: 194
    - path: loanriskservice.py
      hash: md5
      md5: aa282f8b563dddb8b8b5bae5930090a9
      size: 512
    - path: src/bento_build.py
      hash: md5
      md5: cde7acf95fe702ac163ef6f5a6936663
      size: 2716
  k8s_deploy:
    cmd: python src/deploy.py
    deps:
    - path: k8s/deployment.yaml
      hash: md5
      md5: b1d4a2d6f9c5aaf97eeeadb449bb5ca7
      size: 493
    - path: model_version.txt
      hash: md5
      md5: 70efdf2ec9b086079795c442636b55fb
      size: 2
    - path: src/deploy.py
      hash: md5
      md5: 377b2f55a1951e1a3542c2dd2cd94017
      size: 1189
  seldon_deploy:
    cmd: python src/deploy.py
    deps:
    - path: k8s/seldon_deployment.yaml
      hash: md5
      md5: 5e886a226cf8b4a3b73378fe55ebdb24
      size: 371
    - path: model_version.txt
      hash: md5
      md5: eccbc87e4b5ce2fe28308fd9f2a7baf3
      size: 1
    - path: src/deploy.py
      hash: md5
      md5: 38c9138734c81b26f819cb13c6e0ecb8
      size: 1041
